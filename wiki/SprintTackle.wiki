#labels Script
#SprintTackleScript (should be merged into the main sprint script)
{{{
;instead of tackle perk we will use Unstoppable Force||SuperSlam perks to allow tackle.

scn SprintPerkTackleScript

ref tempref
ref tackleRef
ref explosionRef
ref myself
float tackleAP
float playerTackle
float enemyTackle

begin gameMode

;Tackles actors in front of the player
if(SprintSettings.isSprinting == 1)
	if getgs fAutoAimScreenPercentage==10 ;Autoaim enabled (vanilla)
		set tackleRef to player.getCombatTarget
	else ;Autoaim disabled
		set tempref to player.getcrosshairref
		if tempref.isactor==1 && tempref.getdead==0
			set tackleRef to player.getcrosshairref
		endif
	endif
	set myself to GetSelf

	if(tackleRef != 0)
		set tackleAP to player.getBaseav actionPoints / 8
		if(tackleRef.getDistance player < 100 && player.getav actionPoints > tackleAP)
			set SprintSettings.timeOut to 2
			playSound FXMeleeTrapImpact
			set explosionRef to player.placeAtMe SprintTackleExplosion	
			explosionRef.disable
			explosionRef.markForDelete
			
			player.damageav actionPoints tackleAP

			set playerTackle to player.getav unarmed / 10 + player.getav strength + (1 + 0.1 * GetRandompercent)
			set enemyTackle to tackleRef.getav strength + tackleRef.getav endurance + 5
	
			if(playerTackle > enemyTackle) && enemyTackle > 5 && Player.IsInCombat
				player.pushActorAway tackleRef 2
			elseif(enemyTackle > playerTackle + 5) && Player.IsInCombat
;				tackleRef.pushActorAway player 1
				player.pushactoraway myself 1
			elseif enemyTackle <= 5
				player.pushactoraway myself 1
			endif
		endif
	endif
endif

end
}}}