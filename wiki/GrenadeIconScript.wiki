#labels Script
#Grenade Icon Display Script

{{{
scn PNxFPSGrenadeIconScript

short iGrenShow
short iGrenCount
int stop
ref rGrenType


Begin GameMode

; Return if hotkey quest isnt running
if (GetQuestRunning PNxCGrenadeHotkeyQuest == 0)
	SetUIFloat "HUDMainMenu\_PNxGrenadeIconEnabled" 0
	return
endif

SetUIFloat "HUDMainMenu\_PNxGrenadeIconEnabled" 1

;iGrentype
; 0 =  No grenade or switch active
; 1 = Frag Grenade
; 2 = Pulse Grenade
; 3 = Plasma Grenade
; 4 = Dynamite
; 5 = Remote Detonator
; 6 = Throwing Spear
; 7 = Incendiary Grenade
; 8 = Stun Grenade
; 9 = Throwing Hatchet
;10 = Holy Hand Grenade
;11 = Throwing Knife
;12 =  Long Fuse Dynamite
;99 = Unknown Grenade

set rGrenType to PNxCGrenadeHotkeyQuest.grentype
if rGrenType > 0
	set iGrencount to player.getitemcount rGrenType
	SetUIFloat "HUDMainMenu\_PNxGrenadeIconCount" iGrencount
else
	set iGrencount to 0
	SetUIFloat "HUDMainMenu\_PNxGrenadeIconCount" iGrencount
endif
if iGrencount > 0
	if rGrenType == WeapGrenadeFrag                 
					SetUIFloat "HUDMainMenu\_PNxGrenadeIconType" 1
	elseif rGrenType == WeapGrenadePulse            
                       SetUIFloat "HUDMainMenu\_PNxGrenadeIconType" 2
	elseif rGrenType == WeapGrenadePlasma          
                       SetUIFloat "HUDMainMenu\_PNxGrenadeIconType" 3       
	elseif rGrenType == WeapNVDynamite       			 
                       SetUIFloat "HUDMainMenu\_PNxGrenadeIconType" 4
	elseif rGrenType == WeapNVDetonator   			 
                       SetUIFloat "HUDMainMenu\_PNxGrenadeIconType" 5
	elseif rGrenType == WeapNVThrowingSpear        
                       SetUIFloat "HUDMainMenu\_PNxGrenadeIconType" 6   
	elseif rGrenType == WeapNVGrenadeIncendiary          
                       SetUIFloat "HUDMainMenu\_PNxGrenadeIconType" 7
	elseif rGrenType == WeapNVGrenadeStun          
                       SetUIFloat "HUDMainMenu\_PNxGrenadeIconType" 8				
	elseif rGrenType == WeapNVThrowingHatchet      
                       SetUIFloat "HUDMainMenu\_PNxGrenadeIconType" 9
	elseif rGrenType == WeapNVGrenadeFragHoly       
                       SetUIFloat "HUDMainMenu\_PNxGrenadeIconType" 10        
	elseif rGrenType == WeapNVThrowingKnife       
                       SetUIFloat "HUDMainMenu\_PNxGrenadeIconType" 11
	elseif rGrenType == WeapNVLongFuseDynamite       
                       SetUIFloat "HUDMainMenu\_PNxGrenadeIconType" 12
	else                                           						 ;Unknown Grenade that somebody manually added to the grenformlist
                       SetUIFloat "HUDMainMenu\_PNxGrenadeIconType" 99
	endif
else                                                    					;Display nothing, because the grenades are currently switching or the player has no grenades
	SetUIFloat "HUDMainMenu\_PNxGrenadeIconType" 0
endif

if stop == 1
	SetUIFloat "HUDMainMenu\_PNxGrenadeIconType" 0
        stopquest PNxCGrenadeIconQuest
endif

End
}}}